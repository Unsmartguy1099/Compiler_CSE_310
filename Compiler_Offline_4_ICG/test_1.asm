;-------
;
;-------
.MODEL SMALL
.STACK 1000H
.Data
	CR EQU 0DH
	LF EQU 0AH
	number DB "00000$"
	a DW 1 DUP (0000H)
	b DW 1 DUP (0000H)
	c DW 1 DUP (0000H)
.CODE
func_a PROC
	PUSH BP
	MOV BP, SP
	MOV AX, 7
	PUSH AX
	POP AX
	MOV a, AX
	POP BP
	RET
func_a ENDP
foo PROC
	PUSH BP
	MOV BP, SP
	MOV AX, [BP+4]
	PUSH AX
	MOV AX, 3
	PUSH AX
	POP BX
	POP AX
	ADD AX, BX
	PUSH AX
	POP AX
	MOV [BP+4], AX
	MOV AX, [BP+4]
	POP BP
	RET 1
foo ENDP
bar PROC
	PUSH BP
	MOV BP, SP
	MOV AX, 4
	PUSH AX
	MOV AX, [BP+6]
	PUSH AX
	MOV AX, 2
	PUSH AX
	MOV AX, [BP+4]
	PUSH AX
	POP CX
	POP AX
	CWD
	MUL CX
	MOV AX, CX
	PUSH AX
	POP BX
	POP AX
	ADD AX, BX
	PUSH AX
	POP CX
	POP AX
	CWD
	MUL CX
	MOV AX, CX
	PUSH AX
	POP AX
	MOV c, AX
	MOV AX, c
	POP BP
	RET 2
bar ENDP
main PROC
	MOV AX, @DATA
	MOV DS, AX
	PUSH BP
	MOV BP, SP
	SUB SP, 2
	SUB SP, 2
	SUB SP, 2
	SUB SP, 2
	MOV AX, 5
	PUSH AX
	POP AX
	MOV [BP-2], AX
	MOV AX, 6
	PUSH AX
	POP AX
	MOV [BP-4], AX
	MOV AX, [BP-2]
	PUSH AX
	CALL foo
	PUSH AX
	POP AX
	MOV [BP-6], AX
	MOV AX, [BP-2]
	PUSH AX
	MOV AX, [BP-4]
	PUSH AX
	CALL bar
	PUSH AX
	POP AX
	MOV [BP-8], AX
	MOV AX, 6
	PUSH AX
	MOV AX, [BP-2]
	PUSH AX
	MOV AX, [BP-4]
	PUSH AX
	CALL bar
	PUSH AX
	MOV AX, 2
	PUSH AX
	MOV AX, 3
	PUSH AX
	MOV AX, [BP-2]
	PUSH AX
	CALL foo
	PUSH AX
	POP CX
	POP AX
	CWD
	MUL CX
	MOV AX, CX
	PUSH AX
	POP BX
	POP AX
	SUB AX, BX
	PUSH AX
	POP BX
	POP AX
	ADD AX, BX
	PUSH AX
	POP CX
	POP AX
	CWD
	MUL CX
	MOV AX, CX
	PUSH AX
	POP AX
	MOV [BP-4], AX
	ADD SP, 8
	POP BP
	MOV AX,4CH
	INT 21H
main ENDP
END main
